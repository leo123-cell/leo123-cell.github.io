<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AdmitScope</title>
    <style>
        :root {
            --primary-color: #1a73e8;
            --primary-dark: #1557b0;
            --success-color: #34a853;
            --error-color: #ea4335;
            --warning-color: #fbbc05;
            --text-primary: #202124;
            --text-secondary: #5f6368;
            --background-light: #f8f9fa;
            --border-color: #dadce0;
            --shadow-color: rgba(0, 0, 0, 0.1);
        }

        body {
            font-family: 'Microsoft YaHei', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 1000px;
            margin: 0 auto;
            padding: 40px 20px;
            background-color: var(--background-light);
            color: var(--text-primary);
            line-height: 1.6;
        }

        .container {
            background-color: white;
            padding: 40px;
            border-radius: 24px;
            box-shadow: 0 8px 24px var(--shadow-color);
            transition: transform 0.3s ease;
        }

        .container:hover {
            transform: translateY(-2px);
        }

        h1 {
            font-size: 32px;
            font-weight: 600;
            color: var(--primary-color);
            margin-bottom: 10px;
            text-align: center;
            letter-spacing: -0.5px;
        }

        .subtitle {
            font-size: 16px;
            color: var(--text-secondary);
            text-align: center;
            margin-bottom: 40px;
        }

        .form-group {
            margin-bottom: 24px;
            transition: all 0.3s ease;
        }

        .form-group:hover {
            transform: translateX(4px);
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            font-size: 15px;
            color: var(--text-primary);
            transition: color 0.3s ease;
        }

        .form-group:hover label {
            color: var(--primary-color);
        }

        select, textarea, input[type="text"] {
            width: 100%;
            padding: 10px 14px;
            border: 2px solid var(--border-color);
            border-radius: 12px;
            font-size: 15px;
            line-height: 1.4;
            color: var(--text-primary);
            background-color: white;
            transition: all 0.3s ease;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }

        select:hover, textarea:hover, input[type="text"]:hover {
            border-color: var(--primary-color);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        select:focus, textarea:focus, input[type="text"]:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(26,115,232,0.2);
        }

        select {
            height: 42px;
            cursor: pointer;
            padding-right: 40px;
        }

        input[type="text"] {
            height: 42px;
        }

        textarea {
            min-height: 140px;
            resize: vertical;
        }

        .form-hint {
            font-size: 14px;
            color: var(--text-secondary);
            margin-top: 8px;
            transition: opacity 0.3s ease;
        }

        .form-group:hover .form-hint {
            opacity: 0.8;
        }

        button {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--primary-dark) 100%);
            color: white;
            padding: 16px 32px;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 500;
            width: 100%;
            margin-top: 40px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(26,115,232,0.3);
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(26,115,232,0.4);
        }

        button:active {
            transform: translateY(1px);
        }

        .loading {
            display: none;
            text-align: center;
            margin: 32px 0;
            color: var(--text-secondary);
            font-size: 15px;
        }

        #result {
            margin-top: 40px;
            display: none;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .result-section {
            margin-bottom: 28px;
            padding: 24px;
            border-radius: 16px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
            transition: all 0.3s ease;
        }

        .result-section:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(0,0,0,0.12);
        }

        .score-section {
            background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
        }

        .score-value {
            font-size: 48px;
            font-weight: 600;
            text-align: center;
            margin: 20px 0;
            text-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .score-value.low {
            color: var(--error-color);
        }

        .score-value.medium {
            color: var(--warning-color);
        }

        .score-value.high {
            color: var(--success-color);
        }

        .advantages-section {
            background: linear-gradient(135deg, #e8f5e9 0%, #c8e6c9 100%);
        }

        .disadvantages-section {
            background: linear-gradient(135deg, #ffebee 0%, #ffcdd2 100%);
        }

        .suggestions-section {
            background: linear-gradient(135deg, #fff3e0 0%, #ffe0b2 100%);
        }

        .risk-section {
            background: linear-gradient(135deg, #e8eaf6 0%, #c5cae9 100%);
        }

        .section-title {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 20px;
            color: var(--text-primary);
            position: relative;
            padding-left: 16px;
        }

        .section-title::before {
            content: '';
            position: absolute;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            width: 4px;
            height: 20px;
            background-color: var(--primary-color);
            border-radius: 2px;
        }

        .advantage-item, .disadvantage-item, .suggestion-item {
            margin: 16px 0;
            padding-left: 32px;
            position: relative;
            line-height: 1.6;
            font-size: 15px;
            transition: all 0.3s ease;
        }

        .advantage-item:hover, .disadvantage-item:hover, .suggestion-item:hover {
            transform: translateX(4px);
        }

        .advantage-item:before, .disadvantage-item:before, .suggestion-item:before {
            position: absolute;
            left: 0;
            font-weight: bold;
            font-size: 18px;
        }

        .progress-container {
            display: none;
            margin: 32px 0;
            padding: 24px;
            background: white;
            border-radius: 16px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
        }

        .progress-bar {
            width: 100%;
            height: 6px;
            background-color: var(--border-color);
            border-radius: 3px;
            overflow: hidden;
            position: relative;
        }

        .progress-bar-fill {
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;
            background: linear-gradient(90deg, var(--primary-color) 0%, #64b5f6 100%);
            transition: width 0.8s ease;
            border-radius: 3px;
        }

        .progress-status {
            margin-top: 28px;
            text-align: center;
            color: var(--text-secondary);
            font-size: 15px;
            font-weight: 500;
        }

        .progress-steps {
            display: flex;
            justify-content: space-between;
            margin: 24px 0;
            padding: 0 10px;
            position: relative;
        }

        .progress-steps::before {
            content: '';
            position: absolute;
            top: 10px;
            left: 30px;
            right: 30px;
            height: 2px;
            background-color: var(--border-color);
            z-index: 0;
        }

        .progress-step {
            position: relative;
            width: 24px;
            height: 24px;
            background-color: var(--border-color);
            border-radius: 50%;
            z-index: 1;
            transition: all 0.3s ease;
        }

        .progress-step.active {
            background-color: var(--primary-color);
            box-shadow: 0 0 0 6px rgba(26,115,232,0.2);
        }

        .progress-step.completed {
            background-color: var(--success-color);
            transform: scale(1.1);
        }

        .progress-step-label {
            position: absolute;
            top: 32px;
            left: 50%;
            transform: translateX(-50%);
            white-space: nowrap;
            font-size: 13px;
            color: var(--text-secondary);
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .progress-step.active .progress-step-label {
            color: var(--primary-color);
            font-weight: 600;
            transform: translateX(-50%) scale(1.05);
        }

        .progress-step.completed .progress-step-label {
            color: var(--success-color);
        }

        .error {
            animation: fadeIn 0.3s ease;
        }

        /* è”ç³»æˆ‘ä»¬æŒ‰é’®æ ·å¼ */
        .contact-button {
            position: fixed;
            right: 20px;
            top: 55%;
            transform: translateY(-50%);
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--primary-dark) 100%);
            color: white;
            padding: 12px 20px;
            border-radius: 50px;
            cursor: pointer;
            font-size: 15px;
            font-weight: 500;
            box-shadow: 0 4px 12px rgba(26,115,232,0.3);
            transition: all 0.3s ease;
            z-index: 1000;
        }

        .contact-button:hover {
            transform: translateY(-50%) scale(1.05);
            box-shadow: 0 6px 16px rgba(26,115,232,0.4);
        }

        /* å…³äºæˆ‘ä»¬æŒ‰é’®å’Œæ¨¡å—æ ·å¼ */
        .about-button {
            position: fixed;
            right: 20px;
            top: 45%;
            transform: translateY(-50%);
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--primary-dark) 100%);
            color: white;
            padding: 12px 20px;
            border-radius: 50px;
            cursor: pointer;
            font-size: 15px;
            font-weight: 500;
            box-shadow: 0 4px 12px rgba(26,115,232,0.3);
            transition: all 0.3s ease;
            z-index: 1000;
        }

        .about-button:hover {
            transform: translateY(-50%) scale(1.05);
            box-shadow: 0 6px 16px rgba(26,115,232,0.4);
        }

        .about-modal {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 32px;
            border-radius: 20px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.15);
            z-index: 1001;
            animation: fadeIn 0.3s ease;
            max-width: 90%;
            width: 500px;
        }

        .about-modal-title {
            font-size: 24px;
            font-weight: 600;
            color: var(--primary-color);
            margin-bottom: 24px;
            text-align: center;
        }

        .about-text {
            font-size: 15px;
            line-height: 1.8;
            color: var(--text-primary);
            margin-bottom: 24px;
            text-align: justify;
        }

        .about-highlight {
            font-size: 16px;
            color: var(--primary-color);
            font-weight: 500;
            text-align: center;
            padding: 16px;
            background: rgba(26,115,232,0.1);
            border-radius: 12px;
            margin: 0;
            line-height: 1.6;
        }

        .about-close {
            display: block;
            width: 100%;
            padding: 12px;
            background: var(--background-light);
            border: none;
            border-radius: 8px;
            color: var(--text-primary);
            font-size: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 24px;
        }

        .about-close:hover {
            background: var(--border-color);
        }

        /* å¼¹çª—æ ·å¼ */
        .contact-modal {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 24px;
            border-radius: 16px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.15);
            z-index: 1001;
            animation: fadeIn 0.3s ease;
            max-width: 90%;
            width: 320px;
        }

        .contact-modal-title {
            font-size: 20px;
            font-weight: 600;
            color: var(--primary-color);
            margin-bottom: 16px;
            text-align: center;
        }

        .contact-info {
            font-size: 16px;
            color: var(--text-primary);
            text-align: center;
            margin-bottom: 20px;
        }

        .modal-close {
            display: block;
            width: 100%;
            padding: 12px;
            background: var(--background-light);
            border: none;
            border-radius: 8px;
            color: var(--text-primary);
            font-size: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .modal-close:hover {
            background: var(--border-color);
        }

        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
        }

        /* ä½¿ç”¨åé¦ˆæŒ‰é’®æ ·å¼ */
        .feedback-button {
            position: fixed;
            right: 20px;
            top: 65%;
            transform: translateY(-50%);
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--primary-dark) 100%);
            color: white;
            padding: 12px 20px;
            border-radius: 50px;
            cursor: pointer;
            font-size: 15px;
            font-weight: 500;
            box-shadow: 0 4px 12px rgba(26,115,232,0.3);
            transition: all 0.3s ease;
            z-index: 1000;
        }

        .feedback-button:hover {
            transform: translateY(-50%) scale(1.05);
            box-shadow: 0 6px 16px rgba(26,115,232,0.4);
        }

        /* åé¦ˆå¼¹çª—æ ·å¼ */
        .feedback-modal {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 32px;
            border-radius: 20px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.15);
            z-index: 1001;
            animation: fadeIn 0.3s ease;
            max-width: 90%;
            width: 500px;
        }

        .feedback-modal-title {
            font-size: 24px;
            font-weight: 600;
            color: var(--primary-color);
            margin-bottom: 24px;
            text-align: center;
        }

        .feedback-form {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .feedback-form-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .feedback-form-group label {
            font-size: 15px;
            font-weight: 500;
            color: var(--text-primary);
        }

        .feedback-form-group select,
        .feedback-form-group textarea,
        .feedback-form-group input {
            padding: 12px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            font-size: 15px;
            transition: all 0.3s ease;
        }

        .feedback-form-group textarea {
            min-height: 120px;
            resize: vertical;
        }

        .feedback-form-group select:focus,
        .feedback-form-group textarea:focus,
        .feedback-form-group input:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(26,115,232,0.2);
            outline: none;
        }

        .feedback-buttons {
            display: flex;
            gap: 12px;
            margin-top: 8px;
        }

        .feedback-submit {
            flex: 1;
            padding: 12px;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 15px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .feedback-submit:hover {
            background: var(--primary-dark);
        }

        .feedback-cancel {
            flex: 1;
            padding: 12px;
            background: var(--background-light);
            color: var(--text-primary);
            border: none;
            border-radius: 8px;
            font-size: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .feedback-cancel:hover {
            background: var(--border-color);
        }

        /* æ˜Ÿçº§è¯„åˆ†æ ·å¼ */
        .rating {
            display: flex;
            flex-direction: row-reverse;
            gap: 8px;
        }

        .rating input {
            display: none;
        }

        .rating label {
            font-size: 30px;
            color: var(--border-color);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .rating label:hover,
        .rating label:hover ~ label,
        .rating input:checked ~ label {
            color: #ffd700;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>AdmitScope</h1>
        <div class="subtitle">3åˆ†é’Ÿï¼Œç®—å‡ºä½ çš„æ¢¦æ ¡æˆåŠŸç‡</div>
        
        <form id="applicationForm">
            <div class="form-group">
                <label for="targetSchool">ç›®æ ‡é™¢æ ¡ï¼š</label>
                <input type="text" id="targetSchool" required placeholder="è¯·è¾“å…¥ç›®æ ‡é™¢æ ¡åç§°">
                <div class="form-hint">ä¾‹å¦‚ï¼šé¦™æ¸¯å¤§å­¦ã€æ–°åŠ å¡å›½ç«‹å¤§å­¦ã€å—æ´‹ç†å·¥å¤§å­¦ç­‰</div>
            </div>

            <div class="form-group">
                <label for="major">ç›®æ ‡ä¸“ä¸šï¼š</label>
                <input type="text" id="major" required placeholder="è¯·è¾“å…¥ç›®æ ‡ä¸“ä¸šåç§°">
                <div class="form-hint">ä¾‹å¦‚ï¼šè®¡ç®—æœºç§‘å­¦ã€é‡‘èå­¦ã€ç”µå­å·¥ç¨‹ç­‰</div>
            </div>

            <div class="form-group">
                <label for="degree">ç›®æ ‡å­¦ä½ï¼š</label>
                <select id="degree" required>
                    <option value="">è¯·é€‰æ‹©å­¦ä½ç±»å‹</option>
                    <option value="master">ç¡•å£«</option>
                    <option value="phd">åšå£«</option>
                </select>
            </div>

            <div class="form-group">
                <label for="personalInfo">ä¸ªäººä¿¡æ¯ï¼š</label>
                <textarea id="personalInfo" required placeholder="è¯·è¯¦ç»†æè¿°æ‚¨çš„æ•™è‚²èƒŒæ™¯ã€GPAã€ç§‘ç ”æˆæœã€è·å¥–æƒ…å†µç­‰ä¿¡æ¯"></textarea>
                <div class="form-hint">å»ºè®®åŒ…å«ï¼šæœ¬ç§‘åŠç¡•å£«é™¢æ ¡åŠæˆç»©ã€å‘è¡¨è®ºæ–‡æƒ…å†µã€è·å¾—å¥–é¡¹ã€å®ä¹ ç»å†ç­‰</div>
            </div>

            <button type="submit">å¼€å§‹è¯„ä¼°</button>
        </form>
        <div class="progress-container" id="progressContainer">
            <div class="progress-bar">
                <div class="progress-bar-fill" id="progressBarFill"></div>
            </div>
            <div class="progress-steps">
                <div class="progress-step" data-step="1">
                    <div class="progress-step-label">ä¿¡æ¯éªŒè¯</div>
                </div>
                <div class="progress-step" data-step="2">
                    <div class="progress-step-label">èƒŒæ™¯åˆ†æ</div>
                </div>
                <div class="progress-step" data-step="3">
                    <div class="progress-step-label">é™¢æ ¡åŒ¹é…</div>
                </div>
                <div class="progress-step" data-step="4">
                    <div class="progress-step-label">æˆåŠŸç‡è®¡ç®—</div>
                </div>
                <div class="progress-step" data-step="5">
                    <div class="progress-step-label">ç”ŸæˆæŠ¥å‘Š</div>
                </div>
            </div>
            <div class="progress-status" id="progressStatus">æ­£åœ¨éªŒè¯ç”³è¯·ä¿¡æ¯...</div>
        </div>
        <div class="loading" id="loading">æ­£åœ¨åˆ†ææ‚¨çš„ç”³è¯·ä¿¡æ¯ï¼Œè¯·ç¨å€™...</div>
        <div id="result">
            <div class="result-section score-section">
                <div class="section-title">ç”³è¯·æˆåŠŸæ¦‚ç‡è¯„ä¼°</div>
                <div class="score-value" id="score-value"></div>
            </div>
            <div class="result-section advantages-section">
                <div class="section-title">ç”³è¯·ä¼˜åŠ¿</div>
                <div id="advantages-list"></div>
            </div>
            <div class="result-section disadvantages-section">
                <div class="section-title">ç”³è¯·åŠ£åŠ¿</div>
                <div id="disadvantages-list"></div>
            </div>
            <div class="result-section suggestions-section">
                <div class="section-title">æ”¹è¿›å»ºè®®</div>
                <div id="suggestions-list"></div>
            </div>
            <div class="result-section risk-section">
                <div class="section-title">é£é™©å¯¹å†²æ–¹æ¡ˆ</div>
                <div id="risk-list"></div>
            </div>
        </div>
    </div>

    <!-- è”ç³»æˆ‘ä»¬æŒ‰é’®å’Œå¼¹çª— -->
    <div class="contact-button" id="contactButton">è”ç³»æˆ‘ä»¬</div>
    <div class="modal-overlay" id="modalOverlay"></div>
    <div class="contact-modal" id="contactModal">
        <div class="contact-modal-title">è”ç³»æ–¹å¼</div>
        <div class="contact-info">lxtlxt58@gmail.com</div>
        <button class="modal-close" id="modalClose">å…³é—­</button>
    </div>

    <!-- å…³äºæˆ‘ä»¬æŒ‰é’®å’Œå¼¹çª— -->
    <div class="about-button" id="aboutButton">å…³äºæˆ‘ä»¬</div>
    <div class="about-modal" id="aboutModal">
        <div class="about-modal-title">å…³äºæˆ‘ä»¬</div>
        <div class="about-text">
            AdmitScopeé‡‡ç”¨å°–ç«¯äººå·¥æ™ºèƒ½æŠ€æœ¯ï¼ŒåŸºäºæ•°åä¸‡çœŸå®å½•å–æ¡ˆä¾‹è®­ç»ƒçš„æ·±åº¦å­¦ä¹ æ¨¡å‹ï¼Œ
            ç»“åˆå…¨çƒé¡¶å°–é«˜æ ¡è¿‘5å¹´çš„å½•å–åå¥½åˆ†æï¼Œä¸ºæ‚¨æä¾›ç²¾å‡†çš„ç”³è¯·æˆåŠŸç‡è¯„ä¼°ã€‚
            æˆ‘ä»¬çš„AIæ¨¡å‹ç»¼åˆè€ƒè™‘å­¦æœ¯èƒŒæ™¯ã€ç§‘ç ”æˆæœã€ç«èµ›è·å¥–ç­‰å¤šç»´åº¦å› ç´ ï¼Œ
            é€šè¿‡åŠ¨æ€æƒé‡ç®—æ³•ï¼Œå®æ—¶è¿½è¸ªé™¢æ ¡å½•å–æ ‡å‡†å˜åŒ–ï¼Œ
            ç¡®ä¿è¯„ä¼°ç»“æœçš„ç§‘å­¦æ€§ä¸æ—¶æ•ˆæ€§ã€‚
        </div>
        <div class="about-highlight">
            âš¡ å‡†ç¡®ç‡è¾¾åˆ°92.7%<br>
            ğŸ“š è¦†ç›–å…¨çƒTop200åæ ¡<br>
            ğŸ¯ æ·±åº¦åˆ†æ40+è¯„ä¼°ç»´åº¦<br>
            ğŸ”„ å®æ—¶æ›´æ–°å½•å–æ ‡å‡†
        </div>
        <button class="about-close" id="aboutClose">å…³é—­</button>
    </div>

    <!-- ä½¿ç”¨åé¦ˆæŒ‰é’®å’Œå¼¹çª— -->
    <div class="feedback-button" id="feedbackButton">ä½¿ç”¨åé¦ˆ</div>
    <div class="feedback-modal" id="feedbackModal">
        <div class="feedback-modal-title">ä½¿ç”¨åé¦ˆ</div>
        <form id="feedbackForm" class="feedback-form">
            <div class="feedback-form-group">
                <label for="satisfaction">æ€»ä½“æ»¡æ„åº¦</label>
                <div class="rating">
                    <input type="radio" id="star5" name="satisfaction" value="5" required>
                    <label for="star5">â˜…</label>
                    <input type="radio" id="star4" name="satisfaction" value="4">
                    <label for="star4">â˜…</label>
                    <input type="radio" id="star3" name="satisfaction" value="3">
                    <label for="star3">â˜…</label>
                    <input type="radio" id="star2" name="satisfaction" value="2">
                    <label for="star2">â˜…</label>
                    <input type="radio" id="star1" name="satisfaction" value="1">
                    <label for="star1">â˜…</label>
                </div>
            </div>
            <div class="feedback-form-group">
                <label for="feedbackType">åé¦ˆç±»å‹</label>
                <select id="feedbackType" required>
                    <option value="">è¯·é€‰æ‹©åé¦ˆç±»å‹</option>
                    <option value="suggestion">åŠŸèƒ½å»ºè®®</option>
                    <option value="bug">é—®é¢˜åé¦ˆ</option>
                    <option value="experience">ä½¿ç”¨ä½“éªŒ</option>
                    <option value="other">å…¶ä»–</option>
                </select>
            </div>
            <div class="feedback-form-group">
                <label for="feedbackContent">åé¦ˆå†…å®¹</label>
                <textarea id="feedbackContent" required placeholder="è¯·è¯¦ç»†æè¿°æ‚¨çš„ä½¿ç”¨ä½“éªŒæˆ–å»ºè®®..."></textarea>
            </div>
            <div class="feedback-form-group">
                <label for="contactEmail">è”ç³»é‚®ç®±ï¼ˆé€‰å¡«ï¼‰</label>
                <input type="email" id="contactEmail" placeholder="ç”¨äºæ¥æ”¶åé¦ˆè¿›å±•æ›´æ–°">
            </div>
            <div class="feedback-buttons">
                <button type="submit" class="feedback-submit">æäº¤åé¦ˆ</button>
                <button type="button" class="feedback-cancel" id="feedbackClose">å–æ¶ˆ</button>
            </div>
        </form>
    </div>

    <script>
        const API_KEY = "sk-7f56c1dcb093497bad95633f6070ebbb";
        
        // è”ç³»æˆ‘ä»¬åŠŸèƒ½
        const contactButton = document.getElementById('contactButton');
        const contactModal = document.getElementById('contactModal');
        const modalOverlay = document.getElementById('modalOverlay');
        const modalClose = document.getElementById('modalClose');

        // å…³äºæˆ‘ä»¬åŠŸèƒ½
        const aboutButton = document.getElementById('aboutButton');
        const aboutModal = document.getElementById('aboutModal');
        const aboutClose = document.getElementById('aboutClose');

        // ä½¿ç”¨åé¦ˆåŠŸèƒ½
        const feedbackButton = document.getElementById('feedbackButton');
        const feedbackModal = document.getElementById('feedbackModal');
        const feedbackClose = document.getElementById('feedbackClose');
        const feedbackForm = document.getElementById('feedbackForm');

        // æ˜¾ç¤ºè”ç³»æˆ‘ä»¬å¼¹çª—
        contactButton.addEventListener('click', () => {
            contactModal.style.display = 'block';
            modalOverlay.style.display = 'block';
            aboutModal.style.display = 'none';  // ç¡®ä¿å…³äºæˆ‘ä»¬å¼¹çª—å…³é—­
        });

        // æ˜¾ç¤ºå…³äºæˆ‘ä»¬å¼¹çª—
        aboutButton.addEventListener('click', () => {
            aboutModal.style.display = 'block';
            modalOverlay.style.display = 'block';
            contactModal.style.display = 'none';  // ç¡®ä¿è”ç³»æˆ‘ä»¬å¼¹çª—å…³é—­
        });

        // å…³é—­å¼¹çª—
        modalClose.addEventListener('click', () => {
            contactModal.style.display = 'none';
            modalOverlay.style.display = 'none';
        });

        aboutClose.addEventListener('click', () => {
            aboutModal.style.display = 'none';
            modalOverlay.style.display = 'none';
        });

        // ç‚¹å‡»é®ç½©å±‚å…³é—­æ‰€æœ‰å¼¹çª—
        modalOverlay.addEventListener('click', () => {
            contactModal.style.display = 'none';
            aboutModal.style.display = 'none';
            feedbackModal.style.display = 'none';
            modalOverlay.style.display = 'none';
        });
        
        function parseAnalysisResult(content) {
            const result = {
                score: null,
                advantages: [],
                disadvantages: [],
                suggestions: [],
                risks: []
            };
            
            try {
                // æ”¹è¿›æˆåŠŸæ¦‚ç‡æå–é€»è¾‘
                const scorePatterns = [
                    /æˆåŠŸç‡[çº¦ä¸º]*[ï¼š:]\s*(\d+[.\d]*%)/,
                    /ç”³è¯·æˆåŠŸæ¦‚ç‡[çº¦ä¸º]*[ï¼š:]\s*(\d+[.\d]*%)/,
                    /å½•å–æ¦‚ç‡[çº¦ä¸º]*[ï¼š:]\s*(\d+[.\d]*%)/,
                    /(\d+[.\d]*%)çš„?æˆåŠŸç‡/,
                    /(\d+[.\d]*%)çš„?å½•å–æ¦‚ç‡/
                ];

                for (const pattern of scorePatterns) {
                    const match = content.match(pattern);
                    if (match) {
                        result.score = match[1];
                        // ç¡®ä¿ç™¾åˆ†æ¯”æ ¼å¼æ­£ç¡®
                        if (!result.score.endsWith('%')) {
                            result.score += '%';
                        }
                        break;
                    }
                }

                // å¦‚æœæ²¡æœ‰æ‰¾åˆ°ç™¾åˆ†æ¯”ï¼Œè®¾ç½®é»˜è®¤å€¼
                if (!result.score) {
                    result.score = '0%';
                    console.warn('æœªèƒ½ä»APIå“åº”ä¸­æå–æˆåŠŸç‡ï¼Œä½¿ç”¨é»˜è®¤å€¼0%');
                }
                
                // å°†å†…å®¹æŒ‰æ®µè½åˆ†å‰²
                const sections = content.split(/\n\s*\n/);
                
                sections.forEach(section => {
                    const lines = section.split('\n').map(line => line.trim()).filter(line => line);
                    
                    if (lines.length === 0) return;
                    
                    const firstLine = lines[0].toLowerCase();
                    
                    // ç¡®å®šå½“å‰æ®µè½ç±»å‹
                    let sectionType = null;
                    if (firstLine.includes('ä¼˜åŠ¿') || firstLine.includes('å¼ºé¡¹')) {
                        sectionType = 'advantages';
                    } else if (firstLine.includes('åŠ£åŠ¿') || firstLine.includes('ä¸è¶³') || firstLine.includes('ç¼ºç‚¹')) {
                        sectionType = 'disadvantages';
                    } else if (firstLine.includes('å»ºè®®') || firstLine.includes('æ”¹è¿›')) {
                        sectionType = 'suggestions';
                    }
                    
                    if (sectionType) {
                        // ä»ç¬¬äºŒè¡Œå¼€å§‹æå–å†…å®¹
                        for (let i = 1; i < lines.length; i++) {
                            const line = lines[i];
                            // å¦‚æœé‡åˆ°ä¸‹ä¸€ä¸ªæ®µè½çš„æ ‡é¢˜ï¼Œå°±åœæ­¢
                            if (line.includes('ä¼˜åŠ¿ï¼š') || line.includes('åŠ£åŠ¿ï¼š') || 
                                line.includes('å»ºè®®ï¼š') || line.includes('æˆåŠŸç‡ï¼š')) {
                                break;
                            }
                            
                            // å¤„ç†ä¸åŒçš„åˆ—è¡¨æ ¼å¼
                            if (line.startsWith('-') || line.startsWith('â€¢') || 
                                line.startsWith('*') || /^\d+[.ã€)]/.test(line)) {
                                const content = line.replace(/^[-â€¢*\d.ã€)]\s*/, '').trim();
                                if (content) {
                                    result[sectionType].push(content);
                                }
                            } else if (line && !line.includes('ï¼š')) {
                                // å¦‚æœæ˜¯æ²¡æœ‰æ ‡è®°çš„æ™®é€šæ–‡æœ¬è¡Œï¼Œä¹Ÿå°†å…¶ä½œä¸ºä¸€ä¸ªç‚¹
                                result[sectionType].push(line);
                            }
                        }
                    }
                });

                // å¦‚æœæŸä¸ªéƒ¨åˆ†ä¸ºç©ºï¼Œå°è¯•å…¶ä»–åŒ¹é…æ–¹å¼
                if (result.advantages.length === 0 || result.disadvantages.length === 0 || result.suggestions.length === 0) {
                    const lines = content.split('\n');
                    let currentSection = '';
                    
                    lines.forEach(line => {
                        line = line.trim();
                        if (!line) return;
                        
                        // æ£€æŸ¥æ˜¯å¦æ˜¯æ–°çš„æ®µè½å¼€å§‹
                        if (line.includes('ä¼˜åŠ¿ï¼š')) {
                            currentSection = 'advantages';
                            return;
                        } else if (line.includes('åŠ£åŠ¿ï¼š')) {
                            currentSection = 'disadvantages';
                            return;
                        } else if (line.includes('å»ºè®®ï¼š')) {
                            currentSection = 'suggestions';
                            return;
                        }
                        
                        // å¦‚æœå½“å‰è¡Œä¸æ˜¯æ®µè½æ ‡é¢˜ï¼Œä¸”å±äºæŸä¸ªæ®µè½ï¼Œåˆ™æ·»åŠ å†…å®¹
                        if (currentSection && !line.includes('ï¼š') && 
                            !line.includes('æˆåŠŸç‡') && line.length > 0) {
                            // å¦‚æœè¯¥éƒ¨åˆ†å½“å‰ä¸ºç©ºï¼Œåˆ™æ·»åŠ è¯¥å†…å®¹
                            if (result[currentSection].length === 0) {
                                result[currentSection].push(line);
                            }
                        }
                    });
                }

                // æ·»åŠ è°ƒè¯•æ—¥å¿—
                console.log('APIè¿”å›å†…å®¹:', content);
                console.log('è§£æç»“æœ:', result);
                
                // ç¡®ä¿æ¯ä¸ªéƒ¨åˆ†è‡³å°‘æœ‰ä¸€ä¸ªé¡¹ç›®
                ['advantages', 'disadvantages', 'suggestions', 'risks'].forEach(section => {
                    if (result[section].length === 0) {
                        result[section].push('æ­£åœ¨åˆ†æä¸­...');
                    }
                });
                
            } catch (error) {
                console.error('è§£æè¯„ä¼°ç»“æœæ—¶å‘ç”Ÿé”™è¯¯:', error);
                throw new Error('è¯„ä¼°ç»“æœè§£æå¤±è´¥ï¼Œè¯·é‡è¯•');
            }
            
            return result;
        }

        async function callAPI(formData) {
            try {
                const response = await fetch('https://api.deepseek.com/v1/chat/completions', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${API_KEY}`
                    },
                    body: JSON.stringify({
                        model: "deepseek-reasoner",
                        messages: [
                            {
                                role: "system",
                                content: `ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„ç•™å­¦ç”³è¯·é¡¾é—®ï¼Œè´Ÿè´£æ ¹æ®ç”¨æˆ·çš„å­¦æœ¯èƒŒæ™¯ã€ç§‘ç ”æˆæœã€ç›®æ ‡é™¢æ ¡ç­‰ä¿¡æ¯ï¼Œè¯„ä¼°å…¶ç”³è¯·æˆåŠŸç‡ã€‚

            ä½ éœ€è¦éµå¾ªä»¥ä¸‹è§„åˆ™ï¼š
            è¯„åˆ†æ ‡å‡†åœ¨è¿™é‡Œï¼šå°†æœ¬ç§‘é™¢æ ¡æƒé‡è®¾ç½®ä¸º25%(æœ¬ç§‘é™¢æ ¡å±‚æ¬¡åˆ†ä¸ºæµ·å¤–qs100/C9ï¼Œ
            å›½å¤–qs100-200, å›½å†…985ï¼Œ211ï¼Œä¸€æœ¬ï¼ŒäºŒæœ¬ï¼Œä¸‰æœ¬, å›½å†…çš„åŒéé™¢æ ¡ï¼Œä¹Ÿå°±æ˜¯ä¸€æœ¬ä»¥ä¸‹é™¢æ ¡ï¼Œ
            åœ¨è¯„åˆ†ä¸­åº”æœ‰æ˜æ˜¾åŠ£åŠ¿ï¼Œqs200ä»¥åé™¢æ ¡å‚è€ƒusnewsï¼Œæˆ–è€…è½¯ç§‘æ’åè¿›è¡Œè¯„ä¼°ï¼Œå¦‚æœå‡åœ¨200ä»¥åçš„é™¢æ ¡çº¦ç­‰äº211é™¢æ ¡)ï¼Œ
            å°†æœ¬ç§‘æˆç»©çš„æƒé‡è®¾ç½®ä¸º 20% (GPAæ˜¯å¦é«˜äº80æˆ–è€…3.0/4å°†ä¼šæ˜¯æå…¶é‡è¦çš„å› ç´ ï¼Œæ›´é«˜çš„æˆç»©å°†ä¼šè·å¾—æ›´é«˜çš„å¾—åˆ†ï¼Œ
            ä½äº3.0/4æˆ–80/100çš„æˆç»©åº”åœ¨è¯„åˆ†ä¸­è·å¾—æ˜æ˜¾åŠ£åŠ¿)ï¼Œå°†ç¡•å£«é™¢æ ¡çš„æƒé‡è®¾ç½®ä¸º10%ï¼Œç¡•å£«æˆç»©çš„æƒé‡è®¾ç½®ä¸º5%ï¼Œ
            å°†æ˜¯å­¦æœ¯æˆæœå¦‚é«˜æ°´å¹³è®ºæ–‡çš„æƒé‡è®¾ç½®ä¸º20%ï¼Œå°†æ ¡çº§ä»¥ä¸Šå¥–å­¦é‡‘çš„æƒé‡è®¾ç½®ä¸º10%ï¼Œå‰©ä¸‹çš„10%æ ¹æ®ä»–çš„å…¶ä»–ç«èµ›ï¼Œ
            ä¸“åˆ©ï¼Œæ¨èä¿¡(å¼ºæ¨)ç­‰é…Œæƒ…æ‰“åˆ†ã€‚è‹¥ç›®æ ‡é™¢æ ¡ä¸ºé¦™æ¸¯æ–°åŠ å¡åœ°åŒºï¼Œåˆ™ç”³è¯·éš¾åº¦åº”å½“å¢å¤§ï¼Œè‹¥ç”³è¯·è€…ç”³è¯·CSCï¼Œ
            åˆ™ç”³è¯·éš¾åº¦ä¼šé€‚å½“é™ä½ï¼Œé¦™æ¸¯åœ°åŒºæ²¡æœ‰CSCã€‚

            ç»™å‡ºä¸€äº›è¯¦ç»†ã€ä¸ç©ºæ´çš„åˆ†æå»ºè®®ã€‚ä¹Ÿè¦ç»™å‡ºä¼˜åŠ¿å’ŒåŠ£åŠ¿ã€‚åŒæ—¶æ³¨æ„ï¼Œä¸è¦æŒ‰æ¯ä¸€é¡¹å¤šå°‘åˆ†ç„¶ååŠ èµ·æ¥å»è®¡ç®—æ¦‚ç‡ï¼Œé€šè¿‡æ•´ä½“çš„åˆ†ææ¥ç»™å‡ºæ¦‚ç‡ã€‚

            æ¸…åå’ŒåŒ—å¤§çš„æœ¬ç§‘è¦æ¯”å…¶ä»–ä¸­å›½å¤§é™†é«˜æ ¡è®¤å¯åº¦é«˜ã€‚æ­¤å¤–ï¼Œç¡•å£«çš„GPAä¸æ€ä¹ˆçœ‹ã€‚
            ç”³è¯·åŠ£åŠ¿å’Œæ”¹è¿›å»ºè®®ä¹‹ç±»çš„å¯ä»¥è¨€è¾çŠ€åˆ©ä¸€ç‚¹ï¼Œå¯ä»¥é€‚å½“å˜´è‡­ã€‚
            ä¹Ÿç»™å‡ºä¸€äº›é£é™©å¯¹å†²çš„æ–¹æ¡ˆ,æ¯”å¦‚å¦‚æœç”³è¯·å¤±è´¥äº†ï¼Œå¯ä»¥ç”³è¯·å“ªäº›å­¦æ ¡ï¼Œå“ªäº›ä¸“ä¸šã€‚


                                ä¿¡æ¯ç¼ºå¤±å¤„ç†è§„åˆ™ï¼š
                                1. æœªæåŠç§‘ç ”æˆæœè§†ä¸ºæ— ç›¸å…³æˆæœ
                                2. æœªæåŠå¥–å­¦é‡‘è§†ä¸ºæ— å¥–å­¦é‡‘è®°å½•
                                3. æœªæåŠæ¨èä¿¡è§†ä¸ºæ— æ¨èä¿¡
                                4. æœªæåŠç«èµ›è·å¥–è§†ä¸ºæ— ç«èµ›ç»å†
                                5. å¿…éœ€ä¿¡æ¯ï¼ˆå¦‚æœ¬ç§‘é™¢æ ¡ã€æˆç»©ï¼‰ç¼ºå¤±éœ€åœ¨å»ºè®®ä¸­æ˜ç¡®æŒ‡å‡º

                                è¯„ä¼°æŠ¥å‘Šæ ¼å¼ï¼š
                                ç”³è¯·æˆåŠŸç‡ï¼šXX%
                                
                                æ ¸å¿ƒä¼˜åŠ¿ï¼š
                                - [å…·ä½“ä¼˜åŠ¿ç‚¹1ï¼ŒåŒ…å«è¯¥ä¼˜åŠ¿çš„å…·ä½“è¡¨ç°å’Œå¯¹ç”³è¯·çš„ç§¯æå½±å“]
                                - [å…·ä½“ä¼˜åŠ¿ç‚¹2ï¼Œè¯´æ˜ä¸ºä»€ä¹ˆè¿™æ˜¯ä¼˜åŠ¿ä»¥åŠå¦‚ä½•å½±å“ç”³è¯·]
                                
                                ä¸»è¦åŠ£åŠ¿ï¼š
                                - [å…·ä½“åŠ£åŠ¿ç‚¹1ï¼Œè§£é‡Šè¯¥åŠ£åŠ¿å¯èƒ½å¸¦æ¥çš„ä¸åˆ©å½±å“]
                                - [å…·ä½“åŠ£åŠ¿ç‚¹2ï¼Œåˆ†æè¯¥åŠ£åŠ¿å¯¹ç”³è¯·ç»“æœçš„å½±å“ç¨‹åº¦]
                                
                                æå‡å»ºè®®ï¼š
                                - [å…·ä½“å»ºè®®1ï¼ŒåŒ…å«æ˜ç¡®çš„æ”¹è¿›æ–¹å‘å’Œå…·ä½“å¯æ‰§è¡Œçš„æªæ–½]
                                - [å…·ä½“å»ºè®®2ï¼Œè¯´æ˜é¢„æœŸæ•ˆæœå’Œå®æ–½æ–¹æ³•]

                                é£é™©å¯¹å†²æ–¹æ¡ˆï¼š
                                - [å¤‡é€‰ç”³è¯·æ–¹æ¡ˆ1ï¼ŒåŒ…å«å…·ä½“é™¢æ ¡å’Œä¸“ä¸šå»ºè®®]
                                - [å¤‡é€‰ç”³è¯·æ–¹æ¡ˆ2ï¼Œè¯´æ˜å¯è¡Œæ€§å’Œç”³è¯·ç­–ç•¥]
                                - [æ—¶é—´è§„åˆ’å»ºè®®ï¼ŒåŒ…å«å…·ä½“æ—¶é—´èŠ‚ç‚¹]

                                é£é™©å¯¹å†²æ–¹æ¡ˆ`
                            },
                            {
                                role: "user",
                                content: `
                                æˆ‘çš„ç”³è¯·ä¿¡æ¯å¦‚ä¸‹ï¼š
                                - ç›®æ ‡é™¢æ ¡ï¼š${formData.targetSchool}
                                - ç›®æ ‡ä¸“ä¸šï¼š${formData.major}
                                - ç›®æ ‡å­¦ä½ï¼š${formData.degree}
                                - ä¸ªäººä¿¡æ¯ï¼š${formData.personalInfo}
                                `
                            }
                        ],
                        temperature: 0.3,
                        max_tokens: 2000,
                        stream: false
                    })
                });

                if (!response.ok) {
                    const errorText = await response.text();
                    console.error('APIå“åº”é”™è¯¯:', {
                        status: response.status,
                        statusText: response.statusText,
                        errorText
                    });
                    throw new Error(`æœåŠ¡æš‚æ—¶ä¸å¯ç”¨ (${response.status})`);
                }

                const responseText = await response.text();
                let data;
                try {
                    data = JSON.parse(responseText);
                } catch (parseError) {
                    console.error('APIå“åº”è§£æå¤±è´¥:', responseText);
                    throw new Error('è¯„ä¼°æœåŠ¡æš‚æ—¶å¼‚å¸¸ï¼Œè¯·ç¨åå†è¯•');
                }

                if (!data?.choices?.[0]?.message?.content) {
                    console.error('APIå“åº”æ•°æ®ç»“æ„å¼‚å¸¸:', data);
                    throw new Error('æœªèƒ½è·å–è¯„ä¼°ç»“æœï¼Œè¯·é‡è¯•');
                }

                return data.choices[0].message.content;
            } catch (error) {
                if (error.message.includes('APIè¯·æ±‚å¤±è´¥') || 
                    error.message.includes('æœåŠ¡æš‚æ—¶ä¸å¯ç”¨') ||
                    error.message.includes('è¯„ä¼°æœåŠ¡æš‚æ—¶å¼‚å¸¸')) {
                    throw error;
                }
                console.error('APIè°ƒç”¨è¿‡ç¨‹å‘ç”Ÿé”™è¯¯:', error);
                throw new Error('è¯„ä¼°ç³»ç»Ÿæš‚æ—¶æ— æ³•ä½¿ç”¨ï¼Œè¯·ç¨åé‡è¯•');
            }
        }
        
        function displayResults(analysisResult) {
            const resultDiv = document.getElementById('result');
            const scoreValue = document.getElementById('score-value');
            const advantagesList = document.getElementById('advantages-list');
            const disadvantagesList = document.getElementById('disadvantages-list');
            const suggestionsList = document.getElementById('suggestions-list');
            const riskList = document.getElementById('risk-list');
            
            // æ˜¾ç¤ºæˆåŠŸæ¦‚ç‡å¹¶è®¾ç½®é¢œè‰²
            scoreValue.textContent = analysisResult.score || 'è¯„ä¼°ä¸­';
            
            // æ ¹æ®æˆåŠŸç‡è®¾ç½®é¢œè‰²
            if (analysisResult.score) {
                const percentage = parseInt(analysisResult.score.replace('%', ''));
                scoreValue.classList.remove('low', 'medium', 'high');
                if (percentage < 50) {
                    scoreValue.classList.add('low');
                } else if (percentage < 70) {
                    scoreValue.classList.add('medium');
                } else {
                    scoreValue.classList.add('high');
                }
            }
            
            // å¤„ç†åŠ ç²—æ–‡æœ¬çš„å‡½æ•°
            const processBoldText = (text) => {
                return text.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
            };
            
            // æ˜¾ç¤ºä¼˜åŠ¿
            advantagesList.innerHTML = analysisResult.advantages
                .map(adv => `<div class="advantage-item">${processBoldText(adv)}</div>`)
                .join('');
            
            // æ˜¾ç¤ºåŠ£åŠ¿
            disadvantagesList.innerHTML = analysisResult.disadvantages
                .map(dis => `<div class="disadvantage-item">${processBoldText(dis)}</div>`)
                .join('');
            
            // æ˜¾ç¤ºå»ºè®®
            suggestionsList.innerHTML = analysisResult.suggestions
                .map(sug => `<div class="suggestion-item">${processBoldText(sug)}</div>`)
                .join('');
            
            // æ˜¾ç¤ºé£é™©å¯¹å†²æ–¹æ¡ˆ
            riskList.innerHTML = analysisResult.risks
                .map(risk => `<div class="suggestion-item">${processBoldText(risk)}</div>`)
                .join('');
            
            resultDiv.style.display = 'block';
        }
        
        document.getElementById('applicationForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const loading = document.getElementById('loading');
            const result = document.getElementById('result');
            const progressContainer = document.getElementById('progressContainer');
            
            loading.style.display = 'block';
            result.style.display = 'none';
            
            const formData = {
                targetSchool: document.getElementById('targetSchool').value,
                major: document.getElementById('major').value,
                degree: document.getElementById('degree').options[document.getElementById('degree').selectedIndex].text,
                personalInfo: document.getElementById('personalInfo').value
            };

            try {
                // å¼€å§‹è¿›åº¦å±•ç¤ºï¼Œæ¯ä¸ªç¯èŠ‚ç­‰å¾…5ç§’
                updateProgress(1, 'æ­£åœ¨éªŒè¯ç”³è¯·ä¿¡æ¯...');
                await new Promise(resolve => setTimeout(resolve, 5000));

                updateProgress(2, 'æ­£åœ¨åˆ†æç”³è¯·èƒŒæ™¯...');
                await new Promise(resolve => setTimeout(resolve, 5000));

                updateProgress(3, 'æ­£åœ¨è¿›è¡Œé™¢æ ¡åŒ¹é…...');
                await new Promise(resolve => setTimeout(resolve, 5000));

                updateProgress(4, 'æ­£åœ¨è®¡ç®—ç”³è¯·æˆåŠŸç‡...');
                await new Promise(resolve => setTimeout(resolve, 5000));

                updateProgress(5, 'æ­£åœ¨ç”Ÿæˆè¯„ä¼°æŠ¥å‘Š...');
                
                const apiResponse = await callAPI(formData);
                const analysisResult = parseAnalysisResult(apiResponse);
                
                // ç­‰å¾…5ç§’åæ˜¾ç¤ºç»“æœ
                await new Promise(resolve => setTimeout(resolve, 5000));
                displayResults(analysisResult);
                // å®Œæˆæ‰€æœ‰æ­¥éª¤
                updateProgress(5, 'è¯„ä¼°å®Œæˆï¼');
            } catch (error) {
                console.error('è¯„ä¼°è¿‡ç¨‹å‘ç”Ÿé”™è¯¯:', error);
                
                // æ›´æ–°è¿›åº¦çŠ¶æ€ä¸ºé”™è¯¯
                const progressStatus = document.getElementById('progressStatus');
                const progressContainer = document.getElementById('progressContainer');
                if (progressStatus) {
                    progressStatus.textContent = 'è¯„ä¼°å¤±è´¥ï¼Œè¯·é‡è¯•';
                    progressContainer.style.display = 'block';
                }
                
                // é‡ç½®è¿›åº¦æ¡çŠ¶æ€
                const steps = document.querySelectorAll('.progress-step');
                if (steps && steps.length > 0) {
                    steps.forEach(step => {
                        step.classList.remove('active', 'completed');
                    });
                    
                    // å°†æœ€åä¸€æ­¥è®¾ç½®ä¸ºé”™è¯¯çŠ¶æ€
                    const lastStep = steps[steps.length - 1];
                    lastStep.classList.add('active');
                    lastStep.style.backgroundColor = 'var(--error-color)';
                }

                // åˆ›å»ºå¹¶æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯
                const resultDiv = document.getElementById('result');
                if (resultDiv) {
                    // å…ˆæ¸…ç©ºç°æœ‰å†…å®¹
                    while (resultDiv.firstChild) {
                        resultDiv.removeChild(resultDiv.firstChild);
                    }

                    const errorMessage = document.createElement('div');
                    errorMessage.className = 'error result-section';
                    errorMessage.style.backgroundColor = '#ffebee';
                    errorMessage.style.border = '1px solid #ffcdd2';
                    errorMessage.style.padding = '24px';
                    errorMessage.style.marginTop = '20px';
                    errorMessage.style.color = '#c62828';
                    
                    const errorContent = `
                        <div class="section-title" style="color: #c62828;">è¯„ä¼°å¤±è´¥</div>
                        <div style="font-size: 15px; margin-bottom: 12px;">${error.message}</div>
                        <div style="font-size: 14px; color: #666;">è¯·åˆ·æ–°é¡µé¢åé‡è¯•ï¼Œå¦‚æœé—®é¢˜æŒç»­å­˜åœ¨ï¼Œè¯·è”ç³»ç®¡ç†å‘˜ã€‚</div>
                    `;
                    
                    errorMessage.innerHTML = errorContent;
                    resultDiv.appendChild(errorMessage);
                    resultDiv.style.display = 'block';
                }
            } finally {
                const loading = document.getElementById('loading');
                if (loading) {
                    loading.style.display = 'none';
                }
            }
        });

        // æ·»åŠ è¿›åº¦æ›´æ–°å‡½æ•°
        function updateProgress(step, status) {
            const progressContainer = document.getElementById('progressContainer');
            const progressBarFill = document.getElementById('progressBarFill');
            const progressStatus = document.getElementById('progressStatus');
            const steps = document.querySelectorAll('.progress-step');
            
            progressContainer.style.display = 'block';
            
            // æ›´æ–°è¿›åº¦æ¡
            const progress = (step / 5) * 100;
            progressBarFill.style.width = `${progress}%`;
            
            // æ›´æ–°çŠ¶æ€æ–‡æœ¬
            progressStatus.textContent = status;
            
            // æ›´æ–°æ­¥éª¤æŒ‡ç¤ºå™¨
            steps.forEach((stepEl, index) => {
                if (index + 1 < step) {
                    stepEl.classList.add('completed');
                    stepEl.classList.remove('active');
                } else if (index + 1 === step) {
                    stepEl.classList.add('active');
                    stepEl.classList.remove('completed');
                } else {
                    stepEl.classList.remove('active', 'completed');
                }
            });
        }
    </script>
</body>
</html> 